<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Promise</title>
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
	<style>
		h1, form, button, #result{
			width: 50%;
			margin:20px auto;
		}
	</style>
</head>
<body>
<h1>Promise/submit</h1>
<form method="POST"  action="http://localhost:3000/posts" enctype="application/x-www-form-urlencoded">
	<div class="form-group">
		<input type="text" name="comments" placeholder="add your name" class="form-control">
		<button type="submit" class="btn btn-default">Submit</button>
	</div>
</form>
<div id="result"></div>
<script>
	var promiseFn = function (url){
		return new Promise(function(result, reject){
			var req = new XMLHttpRequest();
			req.open('GET', url, true);
			req.onload = function(){
				if(req.status == 200){
					result(req.response);
				} else {
					reject(Error(req.statusText));
				}
			};
			req.onerror = function(){
				reject(Error("Nettwork Error"));
			}
			req.send(null);
		});
	}
	promiseFn('http://localhost:3000/posts').then(function(res){
		var result = document.querySelector('#result');
		console.log(res);
	});

</script>
</body>
</html>